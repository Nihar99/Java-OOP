package extension;

import java.util.List;

import de.fhpotsdam.unfolding.UnfoldingMap;
import de.fhpotsdam.unfolding.data.Feature;
import de.fhpotsdam.unfolding.data.GeoJSONReader;
import de.fhpotsdam.unfolding.marker.Marker;
import de.fhpotsdam.unfolding.providers.Google;
import de.fhpotsdam.unfolding.providers.OpenStreetMap;
import de.fhpotsdam.unfolding.utils.MapUtils;
import module5.CityMarker;
import module5.CommonMarker;
import processing.core.PApplet;

public class CoronaCountryMap extends PApplet {
	private static final long serialVersionUID = 1L;
	private UnfoldingMap map;
	private List<Marker> countryMarkers;
	private List<Feature> countries;
	private String countryFile = "country-data.json";
	private CommonMarker lastSelected;
	private CommonMarker lastClicked;
	
	public void setup()
	{
		size(900,700,OPENGL);
		map = new UnfoldingMap(this,200,50,650,600,new Google.GoogleMapProvider());
		
		MapUtils.createDefaultEventDispatcher(this, map);
		countries = GeoJSONReader.loadData(this, countryFile);
		
		countryMarkers = MapUtils.createSimpleMarkers(countries);
		
		map.addMarkers(countryMarkers);
		
	}
	public void draw() {
	    background(10);
	    map.draw();
	    addKey();
	}


	// helper method to draw key in GUI
	// TODO: Implement this method to draw the key
	private void addKey() 
	{	
		// Remember you can use Processing's graphics methods here
		fill(255, 250, 240);
		
		int xbase = 25;
		int ybase = 50;
		
		rect(xbase, ybase, 150, 250);
		
		fill(0);
		textAlign(LEFT, CENTER);
		textSize(12);
		text("COVID 19", xbase+25, ybase+25);
		
		fill(150, 30, 30);
		int tri_xbase = xbase + 35;
		int tri_ybase = ybase + 50;

		fill(0, 0, 0);
		textAlign(LEFT, CENTER);
		text("Less than 10k cases", tri_xbase + 15, tri_ybase);
		text("Between 10k and 1 lakh cases", xbase+50, ybase+70);
		text("More than 1 lakh cases", xbase+50, ybase+90);
		
		fill(0, 255, 0);
		ellipse(xbase+35, 
				ybase+70, 
				10, 
				10);
		rect(xbase+35-5, ybase+90-5, 10, 10);
		
		fill(color(255, 255, 0));
		ellipse(xbase+35, ybase+140, 12, 12);
		fill(color(0, 0, 255));
		ellipse(xbase+35, ybase+160, 12, 12);
		fill(color(255, 0, 0));
		ellipse(xbase+35, ybase+180, 12, 12);
		
		textAlign(LEFT, CENTER);
		fill(0, 0, 0);
		text("Shallow", xbase+50, ybase+140);
		text("Intermediate", xbase+50, ybase+160);
		text("Deep", xbase+50, ybase+180);

		text("Past hour", xbase+50, ybase+200);
		
		fill(255, 255, 255);
		int centerx = xbase+35;
		int centery = ybase+200;
		ellipse(centerx, centery, 12, 12);

		strokeWeight(2);
		line(centerx-8, centery-8, centerx+8, centery+8);
		line(centerx-8, centery+8, centerx+8, centery-8);
		
	}
	
}
